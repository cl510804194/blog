---
title: BTC and ETH
lang: en-US
---

# 通用

可分为 6 层 应用层、合约层、激励层、共识层、网络层、数据层

# BTC

应用执行：script
TPS:5
记账模式：UTXO
非图灵完备
无状态

## UTXO:Unspent Transaction Output

未被使用的交易输出

## CoinBase

被系统奖励的 Btc,叫做 CoinBase

## 交易：

`input`:txid,vout,scriptSig,sequence

比如做账号价值的归溯 很麻烦，因为比较分散

## 数据结构：区块头和区块体

# ETH

应用执行：智能合约
记账模式：账户模型
图灵完备

## 账户模型：

nonce:
blance:
storageRoot:
codeHash:

## 数据结构 Merkle 树

想修改数据会影响父节点至所有节点的数据

区块头包括：状态树、交易树、收据树
区块题包括：交易和叔块头的哈希值
两种数据：永久数据和暂时数据（状态相关的）

### 两种账户：合约账户和外部账户

### 交易过程

外部账号触发->合约账号-执行->返回合约账号->返回给外部账号

## ETH1.0 问题

交易拥堵、费用昂贵

## EIP1559

gas 费拍卖机制，根据前面区块的状态确定 base Fee 费, 另外可以选择额外支付 Tip 小费，给了一个 gas 费的标准

## ETH2.0

共识机制：pow->pos,该 pos 共识叫 Casper,成为 ETH2.0 需要质押 32eth
性能扩容：1.0 单主链结构，2.0 建立信标链，分层架构
计算引擎：1.0 只支持 EVM,2.0 上线新引擎 eWASM，支持 C/C++等（未实现）

### pos 问题：

无利害攻击者问题：pos 验证者可以同时在两条链进行投票并获取奖励，会助长区块链分叉行为
中心化问题：权益比重越大出块的概率越大，caster 会罚没主链外的投票奖励机制

### Layer1

对链本身的改进

### Layer2

在 eth2.0 未出来前的解决 1.0 的方法

在链外的改进方法，链下方法

RollUp(ZK,OP)：把交易从 eth 链上计算拿到链下，返回后在回到链上，
侧链
Plasma
状态通道
其他

ZK-Rollup:零知识证明，将多个交易打包成一个，目前无法使智能合约通用,数千 TPS
OP:交易压缩+欺诈证明 可以完全兼容智能合约，数百 TPS,TPS 提升有限
