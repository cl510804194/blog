---
title: nginx
lang: en-US
---

## 负载均衡

将原先单个请求分发到多个服务器中

## 动静分离

动态资源和静态资源的文件分离

## 常用命令

1. 常用版本号
   nginx -v
2. 关闭 nginx
   nginx -s stop

## 配置文件

文件由三部分组成

1. 全局块
   设置影响 nginx 服务器整体运行的命令
2. events 块
   影响用户服务器与用户的网络连接
3. http 块
   代理、缓存、日志定义和其他第三方模块的配置都在这里
   http 也可以包括 server 块和全局块

## 实例

1. 反向代理

2. 负载均衡
   命令： `upstream`
   - nignx 分配服务器策略
     如果某个后端服务器 down 了，会自动剔除
   - 权重
     在分配的域名后面加上 weight=XX 分配权重
   - fair
     将后端服务器的响应时间来分配请求，响应时间短的优先分配
   - ip_hash
     每个请求按访问的 ip hash 结果分配，这样每个访客固定访问一个后端服务器，可以解决 session 问题
